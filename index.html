<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Hewo ^_^</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  .shakeEffect {
    animation: shakeAnim 0.1s infinite;
}

@keyframes shakeAnim {
    0%   { transform: translate(1px, 1px); }
    20%  { transform: translate(-1px, 0px); }
    40%  { transform: translate(2px, -1px); }
    60%  { transform: translate(-2px, 1px); }
    80%  { transform: translate(1px, -2px); }
    100% { transform: translate(0px, 1px); }
}

*{box-sizing:border-box}
body{margin:0;font-family:Tahoma, Verdana, Arial;background:url("https://media1.tenor.com/m/8X6lieAy46cAAAAd/microhard-bliss-grass.gif") center center fixed;background-size:cover;overflow:hidden}
.desktop{position:relative;width:100%;height:calc(100vh - 40px)}

/* --- Â© RadosÅ‚aw G --- */
.desktop-icon{position:absolute;width:90px;text-align:center;color:#fff;font-size:13px;cursor:pointer;user-select:none;}
.desktop-icon img{width:48px;height:48px;display:block;margin:0 auto 4px auto}
.desktop-icon span{display:block;text-shadow:1px 1px 2px #000}

/* --- Â© 0day_cat0 --- */
#taskbar{position:fixed;left:0;right:0;bottom:0;height:40px;background:linear-gradient(#3a6ea5,#1d3b63);display:flex;align-items:center;justify-content:space-between;padding:0 8px;z-index:1000}
#taskbar .left{display:flex;align-items:center;gap:8px}
#startBtn{background:linear-gradient(#0a8000,#00b200);border:2px solid #004d00;border-radius:4px;color:#fff;padding:5px 10px;cursor:pointer;font-weight:bold}
#taskIcons{display:flex;gap:6px}
.task-icon{width:32px;height:32px;border-radius:4px;display:flex;align-items:center;justify-content:center;background:#cce0ff;border:2px solid #2e5ca7;cursor:pointer}
#clock{color:#fff;font-weight:bold;text-shadow:1px 1px 2px #000}

#startMenu{position:fixed;bottom:40px;left:0;width:240px;background:#cce0ff;border:2px solid #2e5ca7;box-shadow:3px 3px 8px #0008;border-radius:4px;padding:6px;display:none;z-index:1500}
#startMenu h3{margin:6px 8px;color:#003a80}
#startMenu ul{list-style:none;padding:0;margin:0}
#startMenu li{padding:6px 8px;cursor:pointer;border-radius:4px;font-weight:bold;color:#003a80}
#startMenu li:hover{background:linear-gradient(#0a64d0,#60a0ff);color:#fff}
#shutdown{background:#c62828;color:#fff;border:none;padding:6px 8px;border-radius:4px;cursor:pointer;font-weight:bold}

.window{position:absolute;width:540px;height:360px;background:#c0d0ff;border:2px solid #3a6ea5;border-radius:6px;box-shadow:0 0 25px #002f80;display:none;flex-direction:column;overflow:hidden}
.titlebar{height:32px;background:linear-gradient(#4f81d9,#2f5fa5);color:#fff;padding:0 8px;display:flex;align-items:center;justify-content:space-between;cursor:move;font-weight:bold}
.titlebar .btns button{margin-left:6px;width:24px;height:24px;border-radius:4px;border:2px solid #2e5ca7;background:linear-gradient(#f1f6ff,#9ac8ff);cursor:pointer}
.content{flex:1;padding:10px;background:#fff;overflow:auto}
#ieContent img{max-width:100%;height:auto;border:4px solid #fff}

#paintCanvas{width:100%;height:100%;background:#fff;display:block}
.toolbar{display:flex;gap:8px;align-items:center;margin-bottom:8px}
.color-swatch{width:20px;height:20px;border:1px solid #444;cursor:pointer}
#notepadArea{width:100%;height:100%;border:0;outline:0;font-family:Consolas,monospace;font-size:14px}
#saperBoard{display:inline-block}
.saper-row{display:flex}
.saper-cell{width:32px;height:32px;border:1px solid #446;background:#aac;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:bold}

/* Snake */
#snakeCanvas{background:#000;display:block}
.folder-list{display:flex;flex-direction:column;gap:8px}
.folder-item{padding:6px;border:1px solid #ddd;background:#f6f6f6;border-radius:4px;cursor:pointer}
@media (max-width:700px){.window{width:90%;height:65%}}


.glitchEffect {
    animation: glitchAnim 0.2s infinite;
    background: #111;
    color: #0ff;
}

@keyframes glitchAnim {
    0% { transform: translate(1px, -1px); filter: hue-rotate(0deg); }
    25% { transform: translate(-2px, 2px); filter: hue-rotate(45deg); }
    50% { transform: translate(2px, -2px); filter: hue-rotate(90deg); }
    75% { transform: translate(-1px, 1px); filter: hue-rotate(180deg); }
    100% { transform: translate(0,0); filter: hue-rotate(0deg); }
}

.deathXP {
    background: #300 !important;
    color: #f00 !important;
    animation: deathFlash 0.5s infinite alternate;
}

@keyframes deathFlash {
    from { background:#200; }
    to   { background:#400; }
}
@keyframes deathPulse {
    from { filter: brightness(0.6) saturate(4); }
    to   { filter: brightness(1.2) saturate(8); }
}

</style>
</head>
<body>

<div class="desktop" id="desktop">
  <!-- Twoje oryginalne okna: PoczÄ…tek, O mnie, Gry -->
  <div id="home" class="window" style="left:60px;top:60px;">
    <div class="titlebar"><span>PoczÄ…tek</span><div class="btns"><button onclick="minimizeWindow('home')">_</button><button onclick="maximizeWindow('home')">â–¡</button><button onclick="closeWindow('home')">X</button></div></div>
    <div class="content">
      <h2>Hejo w moim "windowsie XP" :3</h2>
      <h3>moÅ¼esz tÄ… i inne aplikacjÄ™ schowaÄ‡ przesunÄ…Ä‡ i powiÄ™kszyÄ‡ na caÅ‚y ekran :3</h3>
      <p>Jak jesteÅ› na telefonie to moÅ¼esz przesuwaÄ‡ ekran za pomocÄ… dwÃ³ch palcÃ³w tak samo jak zwiÄ™kszaÄ‡ i zmniejszaÄ‡ (musisz mieÄ‡ wÅ‚Ä…czonÄ… aplikacje "kalkulator") ale za to nie dziaÅ‚ajÄ… gry i przesuwanie aplikacji</p>
      <p>kliknij w poniÅ¼szy guzik aby otworzyÄ‡ kolejnÄ… aplikacje ktÃ³ra mÃ³wi o mnie ^^</p>
      <p>sÄ… piosenki w Folderze ktÃ³re mooÅ¼esz sobie posÅ‚uchaÄ‡ :3</p>
      <button onclick="openWindow('about')">O mnie</button>
     <p>Â©RadosÅ‚aw G</p>
    </div>
  </div>

<div id="cmd" class="window" style="left:200px; top:200px; width:600px; height:350px;">
    <div class="titlebar">
        <span>CMD</span>
        <div class="btns">
            <button onclick="minimizeWindow('cmd')">_</button>
            <button onclick="maximizeWindow('cmd')">â–¡</button>
            <button onclick="closeWindow('cmd')">X</button>
        </div>
    </div>

    <div id="cmdWindow" style="background:#000; color:#0f0; font-family:monospace; padding:10px; display:flex; flex-direction:column; gap:8px;">
      <div id="cmd-output" style="min-height:200px; max-height:300px; overflow-y:auto;"></div>

      <div style="display:flex;align-items:center;gap:8px;">
        <span style="color:#0f0">C:\></span>
        <input id="cmd-input" type="text"
            style="background:#000;color:#0f0;border:none;outline:none;width:80%;"
            onkeydown="if(event.key==='Enter') runCMD()">
      </div>
    </div>
</div>

  <div id="about" class="window" style="left:140px;top:140px;">
    <div class="titlebar"><span>O mnie</span><div class="btns"><button onclick="minimizeWindow('about')">_</button><button onclick="maximizeWindow('about')">â–¡</button><button onclick="closeWindow('about')">X</button></div></div>
    <div class="content">
      <h2>Hejo!</h2>
      <p>Mam na imiÄ™ Radek interesuje siÄ™ informatykÄ… i budowaniem komputerÃ³w i ich naprawianiem.</p>
      <p>czÄ™sto naprawiam komputery i nie tylko, lubiÄ™ pomagaÄ‡ innym ludziom w jaki kolwiek moÅ¼liwy sposÃ³b jaki mogÄ™ ale jestem overthinker i czasami mogÄ™ spytaÄ‡ za duÅ¼o przez co mogÄ™ spowodowaÄ‡ Å¼e druga osoba moÅ¼e siÄ™ poczuÄ‡ nie komfortowo 3:</p>
      <p>jestem introwertykiem lecz lubiÄ™ rozmawiaÄ‡ z ludÅ¼mi, nie lubiÄ™ gdy jest zbyt gÅ‚oÅ›no lub zbyt tÅ‚ocznie, nie wiem czemu ale prawie zawsze siÄ™ martwiÄ™ o swoich znajomych. LubiÄ™ styl Frutiger Aero i retro stron z lat 2000 bardzo lubiÄ™ teÅ¼ i muzykÄ™ elektronicznÄ…, rock i metal w sumie to lubiÄ™ prawie wszystkie gatunki muzyczne oprÃ³cz rapu mam zÅ‚e wspomnienia z rapem.</p>
      <p>lubiÄ™ kodowaÄ‡ (ale nie zawsze), oglÄ…daÄ‡ rÃ³Å¼ne filmy i seriale tylko muszÄ™ je oglÄ…daÄ‡ z kimÅ› bo za bardzo samemu nie lubiÄ™ oglÄ…daÄ‡ czuje siÄ™ w tedy samotnie i pusto gdy to oglÄ…dam</p>
      <p>moim ulubionym filmem jest "Harry Potter i kamieÅ„ filozoficzny" i moim ulubionym serialem jest Rick and Morty tak samo jak wyspa totalnej poraÅ¼ki. Bardzo fajnie siÄ™ mi je oglÄ…daÅ‚o kiedyÅ› ale teraz sÄ… sÅ‚abo dostÄ™pne 3:</p>
      <p>mam dysleksje i czÄ™sto siÄ™ mylÄ™ w pisaniu i czytaniu wiÄ™c jak bÄ™dÄ™ z tobÄ… pisaÅ‚ i zrobiÄ™ bÅ‚Ä…d proszÄ™ nie wytykaj tego palcem Å¼e ten bÅ‚Ä…d zrobiÅ‚em to bardzo nie miÅ‚e </p>
<p>jeszcze jedno lubiÄ™ dawaÄ‡ easter eggi jak chodzi o takiego typu pracy wiÄ™c moÅ¼e coÅ› znajdziesz, powodzenia!</p>
      <p>Bardzo dziÄ™kuje za przeczytanie Å¼yczÄ™ tobie miÅ‚ego dnia :3</p>
     
     <p>Â©RadosÅ‚aw G.</p>
    </div>
  </div>

  <div id="games" class="window" style="left:220px;top:220px;">
    <div class="titlebar"><span>Gry ktÃ³re lubiÄ™ :</span><div class="btns"><button onclick="minimizeWindow('games')">_</button><button onclick="maximizeWindow('games')">â–¡</button><button onclick="closeWindow('games')">X</button></div></div>
    <div class="content">
      <ul>
         <li>1. Changed â€“ jedna z gier ktÃ³re bardzo lubiÄ™ graÄ‡ ,ale szybko siÄ™ skoÅ„czyÅ‚a :(</li>
        <li>2. Undertale â€“ gra ktÃ³ra ma fajny lore ale ma nie najlepszy fandom</li>
        <li>3. VRChat â€“ poznaÅ‚em tu duÅ¼o ludzi, ale ostatnio nie gram z chÄ™ciÄ… zagram kiedy bÄ™dÄ™ miaÅ‚ czas ^_^</li>
        <li>4. Roblox â€“ duÅ¼o dobrych gier, ale masa nudnych kopii o Breinrotach ktÃ³re nie sÄ… fajne nawet do widzenia</li>
        <li>5. Minecraft â€“ podstawowy jest juÅ¼ nudny i taki szybki do pokonania ale z modami jest ciekawie i zabawnie ze znajomymi i nawet samemu</li>
        <li>6. Terraria â€“ niedawno zaczÄ…Å‚em graÄ‡ ale nie wiem co dalej robiÄ‡ i zagram gdy bÄ™dÄ™ miaÅ‚ chÄ™Ä‡ i duÅ¼o czasu wolnego :P</li>
      </ul>
    </div>
  </div>
<!-- WykonaÅ‚ Â©RG -->

  <!-- walone aplikacje na pulpicie -->
  <div class="desktop-icon" style="top:40px; left:40px;" onclick="openWindow('ie')">
    <img src="ludziki.gif" alt="IE">
    <span>Internet Explorer</span>
  </div>

  <div class="desktop-icon" style="top:140px; left:40px;" onclick="openWindow('paint')">
    <img src="paint.png" alt="Paint">
    <span>Paint</span>
  </div>

  <div class="desktop-icon" style="top:240px; left:40px;" onclick="openWindow('notepad')">
    <img src="https://media.tenor.com/Da8kTJVw16kAAAAi/changed.gif" alt="Notatnik">
    <span>Notatnik</span>
  </div>

  <div class="desktop-icon" style="top:340px; left:40px;" onclick="openWindow('folder')">
    <img src="open-file-folder-objects.gif" alt="Folder">
    <span>Folder</span>
  </div>

  <div class="desktop-icon" style="top:440px; left:40px;" onclick="openWindow('saper')">
    <img src="https://media1.tenor.com/m/JC_6pC5dhw8AAAAC/minesweeperplus-minesweeper.gif" alt="Saper">
    <span>Saper</span>
  </div>

  <div class="desktop-icon" style="top:40px; left:160px;" onclick="openWindow('snake')">
    <img src="https://media1.tenor.com/m/Y_0ha-x8NE8AAAAC/snake-snakes.gif" alt="Snake">
    <span>Snake</span>
  </div>

  <div class="desktop-icon" style="top:140px; left:160px;" onclick="openWindow('calculator')">
    <img src="https://media1.tenor.com/m/smRh3B4s8oYAAAAd/macos-calculator.gif" alt="Calc">
    <span>Kalkulator</span>
  </div>

<div class="desktop-icon" style="top:540px; left:40px;" onclick="openWindow('cmd')">
  <img src="CMD.png" alt="CMD">
  <span>CMD</span>
</div>


  <!-- Internet ExploRGer window -->
  <div id="ie" class="window" style="left:420px;top:60px;width:520px;height:420px;">
    <div class="titlebar"><span>Internet Explorer</span><div class="btns"><button onclick="minimizeWindow('ie')">_</button><button onclick="maximizeWindow('ie')">â–¡</button><button onclick="closeWindow('ie')">X</button></div></div>
    <div class="content" id="ieContent">
      <h2 style="text-align:center">Åadowanie kotka...</h2>
    </div>
  </div>

  <!-- Paint Paint -->
  <div id="paint" class="window" style="left:480px;top:120px;width:600px;height:480px;">
    <div class="titlebar"><span>Paint</span><div class="btns"><button onclick="minimizeWindow('paint')">_</button><button onclick="maximizeWindow('paint')">â–¡</button><button onclick="closeWindow('paint')">X</button></div></div>
    <div class="content">
      <div class="toolbar">
        <label>GruboÅ›Ä‡: <input id="brushSize" type="range" min="1" max="30" value="4"></label>
        <div id="colors"></div>
        <button onclick="clearCanvas()">WyczyÅ›Ä‡</button>
        <button onclick="saveImage()">Zapisz obraz</button>
      </div>
      <canvas id="paintCanvas"></canvas>
    </div>
  </div>

  <!-- Notatnik czy window -->
  <div id="notepad" class="window" style="left:80px;top:520px;width:560px;height:320px;">
    <div class="titlebar"><span>Notatnik</span><div class="btns"><button onclick="minimizeWindow('notepad')">_</button><button onclick="maximizeWindow('notepad')">â–¡</button><button onclick="closeWindow('notepad')">X</button></div></div>
    <div class="content"><textarea id="notepadArea" placeholder="Pisz tutaj..."></textarea></div>
  </div>

  <!-- Folder: Informacje o dziwiÄ™Ä‡/jedenaÅ›cie -->
  <div id="folder" class="window" style="left:720px;top:60px;width:420px;height:360px;">
    <div class="titlebar"><span>Folder</span><div class="btns"><button onclick="minimizeWindow('folder')">_</button><button onclick="maximizeWindow('folder')">â–¡</button><button onclick="closeWindow('folder')">X</button></div></div>
    <div class="content">
      <div class="folder-list">
        <div class="folder-item" onclick="openWindow('about')">O mnie</div>
        <div class="folder-item" onclick="openWindow('games')">Gry ktÃ³re lubiÄ™</div>
        <div class="folder-item" onclick="openWindow('songs')">Piosenki</div>
      </div>
    </div>
  </div>

  <!-- Songs placeholder zapomniaÅ‚em polskiego sÅ‚owa -->
  <div id="songs" class="window" style="left:760px;top:440px;width:380px;height:260px;">
  <div class="titlebar">
    <span>Piosenki</span>
    <div class="btns">
      <button onclick="minimizeWindow('songs')">_</button>
      <button onclick="maximizeWindow('songs')">â–¡</button>
      <button onclick="closeWindow('songs')">X</button>
    </div>
  </div>

  <div class="content">
<!-- poniÅ¼ej moÅ¼na dodawaÄ‡ piosenki -->

    <p>Spokojna melodyjka:</p>
    <audio src="melodia.mp3" controls></audio>
  </div>
</div>

  <!-- Superr window -->
  <div id="saper" class="window" style="left:40px;top:760px;width:360px;height:360px;">
    <div class="titlebar"><span>Saper</span><div class="btns"><button onclick="minimizeWindow('saper')">_</button><button onclick="maximizeWindow('saper')">â–¡</button><button onclick="closeWindow('saper')">X</button></div></div>
    <div class="content"><div id="saperBoard"></div><div style="margin-top:8px"><button onclick="createSaper()">Nowa gra</button></div></div>
  </div>

  <!-- Snake window -->
  <div id="snake" class="window" style="left:420px;top:760px;width:360px;height:360px;">
    <div class="titlebar"><span>Snake</span><div class="btns"><button onclick="minimizeWindow('snake')">_</button><button onclick="maximizeWindow('snake')">â–¡</button><button onclick="closeWindow('snake')">X</button></div></div>
    <div class="content">
      <canvas id="snakeCanvas" width="320" height="320"></canvas>
      <div style="margin-top:8px"><button onclick="startSnake()">Start</button><button onclick="stopSnake()">Stop</button></div>
      <p>moÅ¼esz sterowaÄ‡ wÄ™Å¼a za pomocÄ… strzaÅ‚ek na klawiaturze.</p>
    </div>
  </div>

  <!-- Kalkulator -->
  <div id="calculator" class="window" style="left:800px;top:440px;width:300px;height:220px;">
    <div class="titlebar"><span>Kalkulator</span><div class="btns"><button onclick="minimizeWindow('calculator')">_</button><button onclick="maximizeWindow('calculator')">â–¡</button><button onclick="closeWindow('calculator')">X</button></div></div>
    <div class="content">
      <input id="calcInput" style="width:100%;padding:6px;margin-bottom:8px" placeholder="Wpisz dziaÅ‚anie, np. 9+10">
      <button onclick="calcDo()">Oblicz</button>
      <div id="calcResult" style="margin-top:8px;font-weight:bold"></div>
    </div>
  </div>

</div>

<!-- Taskbar -->
<div id="taskbar">
  <div class="left">
    <button id="startBtn">Start</button>
    <div id="taskIcons">
      <div class="task-icon" title="Internet Explorer" onclick="openWindow('ie')"><img src="ludziki.gif" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Paint" onclick="openWindow('paint')"><img src="paint.png" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Notatnik" onclick="openWindow('notepad')"><img src="https://media.tenor.com/Da8kTJVw16kAAAAi/changed.gif" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Folder" onclick="openWindow('folder')"><img src="open-file-folder-objects.gif" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Saper" onclick="openWindow('saper')"><img src="freaky~.gif" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Snake" onclick="openWindow('snake')"><img src="https://media1.tenor.com/m/Y_0ha-x8NE8AAAAC/snake-snakes.gif" style="width:20px;height:20px"></div>
      <div class="task-icon" title="Kalkulator" onclick="openWindow('calculator')"><img src="https://media1.tenor.com/m/smRh3B4s8oYAAAAd/macos-calculator.gif" style="width:20px;height:20px"></div>
    </div>
<div class="task-icon" title="CMD" onclick="openWindow('cmd')">
    <img src="CMD.png" alt="CMD" style="width:20px;height:20px">
</div>
  </div>
  <div style="display:flex;align-items:center;gap:8px">
    <div id="clock">00:00:00</div>
  </div>
</div>

<!-- Start Menu -->
<div id="startMenu">
  <h3>Start</h3>
  <ul>
    <li onclick="openWindow('home');toggleStartMenu()">PoczÄ…tek</li>
    <li onclick="openWindow('about');toggleStartMenu()">O mnie</li>
    <li onclick="openWindow('games');toggleStartMenu()">Gry ktÃ³re lubiÄ™</li>
    <li onclick="openWindow('folder');toggleStartMenu()">Folder</li>
  </ul>
  <div style="margin-top:8px;display:flex;gap:8px">
    <button id="shutdown" onclick="location.reload()">WyÅ‚Ä…cz</button>
  </div>
</div>

<script>
/* --- Bezpieczne referencje do elementÃ³w (jeÅ›li czegoÅ› nie ma â€” kod nie padnie) --- */
function $id(id){ return document.getElementById(id); }

/* --- dziaÅ‚anie piosenek --- */
const audioPlayerEl = $id("audioPlayer");
function playSong() { try{ audioPlayerEl && audioPlayerEl.play && audioPlayerEl.play(); }catch(e){} }
function stopSong() { try{ if(audioPlayerEl){ audioPlayerEl.pause(); audioPlayerEl.currentTime = 0; } }catch(e){} }

/* --- Start menu --- */
const startBtn = $id('startBtn');
const startMenu = $id('startMenu');
if(startBtn) startBtn.addEventListener('click',toggleStartMenu);
function toggleStartMenu(){ if(!startMenu) return; startMenu.style.display = startMenu.style.display === 'block' ? 'none' : 'block'}

/* okna */
let zIndexCounter = 100;
function openWindow(id){
  const el = $id(id);
  if(!el) return;
  el.style.display='flex';
  el.style.zIndex = ++zIndexCounter;
  if(id==='ie') loadCat();
  if(id==='paint') initPaint();
  if(id==='saper') createSaper();
  if(id==='snake') initSnakeCanvas();
}
function closeWindow(id){ const el=$id(id); if(el) el.style.display='none' }
function minimizeWindow(id){ const el=$id(id); if(el) el.style.display='none' }
function maximizeWindow(id){
  const w=$id(id);
  if(!w) return;
  if(w.dataset.max==='true'){
    w.style.width=w.dataset.w;w.style.height=w.dataset.h;w.style.left=w.dataset.l;w.style.top=w.dataset.t;w.dataset.max='false';
  }else{
    w.dataset.w=w.style.width;w.dataset.h=w.style.height;w.dataset.l=w.style.left;w.dataset.t=w.style.top;
    w.style.left='0';w.style.top='0';w.style.width='100%';w.style.height='calc(100% - 40px)';w.dataset.max='true';
  }
}

/* drag windows - tylko okna ktÃ³re majÄ… .titlebar (unikamy przypadkowych zagnieÅ¼dÅ¼eÅ„) */
document.querySelectorAll('.window').forEach(w=>{
  const bar=w.querySelector('.titlebar');
  if(!bar) return;
  bar.addEventListener('mousedown',e=>{
    w.style.zIndex=++zIndexCounter;
    const rect=w.getBoundingClientRect();
    const ox=e.clientX-rect.left, oy=e.clientY-rect.top;
    function mm(ev){ w.style.left=(ev.clientX-ox)+'px'; w.style.top=(ev.clientY-oy)+'px'; }
    function mu(){ document.removeEventListener('mousemove',mm); document.removeEventListener('mouseup',mu); }
    document.addEventListener('mousemove',mm); document.addEventListener('mouseup',mu);
  });
});

/* clock */
setInterval(()=>{ const c=$id('clock'); if(c) c.innerText=new Date().toLocaleTimeString(); },1000);

/* cat loader */
function loadCat(){ const el=$id('ieContent'); if(!el) return; const url='https://cataas.com/cat?'+Math.random(); el.innerHTML=`<img src="${url}" alt="cat">`; }

/* --- Paint --- */
let paintInited=false;
function initPaint(){
  if(paintInited) return; paintInited=true;
  const canvas=$id('paintCanvas'); if(!canvas) return;
  const ctx=canvas.getContext('2d');
  function resize(){ canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; drawPreview(); }
  window.addEventListener('resize',resize); resize();
  let drawing=false; let last=null;
  const brushSize=$id('brushSize');
  const colors=['#000','#ff0000','#00aa00','#0000ff','#ffff00','#ff00ff','#00ffff'];
  const colorsDiv=$id('colors');
  if(colorsDiv) colors.forEach(c=>{const d=document.createElement('div');d.className='color-swatch';d.style.background=c;d.onclick=()=>ctx.strokeStyle=c;colorsDiv.appendChild(d)});
  ctx.lineCap='round';ctx.lineJoin='round';ctx.strokeStyle='#000';ctx.lineWidth=4;
  if(brushSize) brushSize.addEventListener('input',()=>ctx.lineWidth=brushSize.value);
  canvas.addEventListener('mousedown',e=>{ drawing=true; last=[e.offsetX,e.offsetY]; });
  canvas.addEventListener('mousemove',e=>{ if(!drawing) return; ctx.beginPath(); ctx.moveTo(last[0],last[1]); ctx.lineTo(e.offsetX,e.offsetY); ctx.stroke(); last=[e.offsetX,e.offsetY]; });
  canvas.addEventListener('mouseup',()=>drawing=false);
  canvas.addEventListener('mouseleave',()=>drawing=false);
  window.clearCanvas = ()=>{ ctx.clearRect(0,0,canvas.width,canvas.height); };
  window.saveImage = ()=>{ const a=document.createElement('a'); a.href=canvas.toDataURL(); a.download='obraz.png'; a.click(); };

  function drawPreview(){
    // nic specjalnego, tylko upewnienie siÄ™ Å¼e tÅ‚o blanco
    ctx.fillStyle = '#fff';
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }
}

/* --- Notatnik autosave --- */
const noteArea = $id('notepadArea');
if(noteArea){
  noteArea.value = localStorage.getItem('notepad') || '';
  setInterval(()=>localStorage.setItem('notepad',noteArea.value),500);
}

/* --- Saper (Minesweeper) --- */
let saperState=null;
function createSaper(){
  const boardDiv=$id('saperBoard'); if(!boardDiv) return;
  boardDiv.innerHTML='';
  const size=8; const mines=10; let grid=[];
  for(let y=0;y<size;y++){ grid[y]=[]; for(let x=0;x<size;x++){ grid[y][x]={mine:false,rev:false,flag:false,count:0} } }
  let placed=0; while(placed<mines){ const x=Math.floor(Math.random()*size), y=Math.floor(Math.random()*size); if(!grid[y][x].mine){ grid[y][x].mine=true; placed++; } }
  for(let y=0;y<size;y++) for(let x=0;x<size;x++){ let c=0; for(let yy=-1;yy<=1;yy++) for(let xx=-1;xx<=1;xx++) if(grid[y+yy]?.[x+xx]?.mine) c++; grid[y][x].count=c; }
  for(let y=0;y<size;y++){ const row=document.createElement('div'); row.className='saper-row';
    for(let x=0;x<size;x++){
      const cell=document.createElement('div'); cell.className='saper-cell'; cell.dataset.x=x; cell.dataset.y=y;
      cell.oncontextmenu = e=>{ e.preventDefault(); toggleFlag(x,y,cell); };
      cell.onclick = ()=> reveal(x,y,cell);
      row.appendChild(cell);
    }
    boardDiv.appendChild(row);
  }
  saperState={grid, size, mines, revealed:0, flags:0};
}
function toggleFlag(x,y,el){ const s=saperState; if(!s) return; const c=s.grid[y][x]; if(c.rev) return; c.flag=!c.flag; el.innerText=c.flag?'ğŸš©':''; }
function reveal(x,y,el){ const s=saperState; if(!s) return; const c=s.grid[y][x]; if(c.rev||c.flag) return; c.rev=true; if(c.mine){ el.style.background='red'; el.innerText='ğŸ’¥'; alert('PrzegraÅ‚eÅ› = trafiÅ‚eÅ› na mine.'); createSaper(); return; } el.style.background='#ddd'; if(c.count>0){ el.innerText=c.count } else { const stack=[[x,y]]; while(stack.length){ const [cx,cy]=stack.pop(); for(let yy=-1;yy<=1;yy++) for(let xx=-1;xx<=1;xx++){ const nx=cx+xx, ny=cy+yy; const nc=s.grid[ny]?.[nx]; if(nc && !nc.rev && !nc.mine){ nc.rev=true; const node=document.querySelector(`.saper-cell[data-x='${nx}'][data-y='${ny}']`); if(node){ node.style.background='#ddd'; if(nc.count>0) node.innerText=nc.count; else stack.push([nx,ny]); } } } } }
  let rev=0; for(let yy=0;yy<s.size;yy++) for(let xx=0;xx<s.size;xx++) if(s.grid[yy][xx].rev) rev++;
  if(rev === s.size*s.size - s.mines){ alert('WygraÅ‚eÅ›!'); }
}

/* --- Snake --- */
let snakeInterval = null;
function initSnakeCanvas(){ const canvas=$id('snakeCanvas'); if(!canvas) return; const ctx=canvas.getContext('2d'); canvas.width=320; canvas.height=320; ctx.fillStyle='black'; ctx.fillRect(0,0,canvas.width,canvas.height); }
function startSnake(){ if(snakeInterval) return;
  const canvas=$id('snakeCanvas'); if(!canvas) return; const ctx=canvas.getContext('2d');
  const scale=16; const cols=Math.floor(canvas.width/scale), rows=Math.floor(canvas.height/scale);
  let dir='RIGHT'; let snakeArr=[{x:5,y:10},{x:4,y:10},{x:3,y:10}]; let food={x:10,y:10};
  function placeFood(){ food={x:Math.floor(Math.random()*cols), y:Math.floor(Math.random()*rows)}; }
  placeFood();
  function draw(){ ctx.fillStyle='black'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.fillStyle='lime'; snakeArr.forEach(s=>ctx.fillRect(s.x*scale,s.y*scale,scale-1,scale-1)); ctx.fillStyle='red'; ctx.fillRect(food.x*scale,food.y*scale,scale-1,scale-1); }
  function step(){
    const head={x:snakeArr[0].x, y:snakeArr[0].y};
    if(dir==='LEFT') head.x--;
    if(dir==='RIGHT') head.x++;
    if(dir==='UP') head.y--;
    if(dir==='DOWN') head.y++;
    if(head.x<0) head.x=cols-1; if(head.x>=cols) head.x=0; if(head.y<0) head.y=rows-1; if(head.y>=rows) head.y=0;
    if(snakeArr.some(s=>s.x===head.x && s.y===head.y)){ stopSnake(); alert('Koniec gry!'); return; }
    snakeArr.unshift(head);
    if(head.x===food.x && head.y===food.y){ placeFood(); } else { snakeArr.pop(); }
    draw();
  }
  function kd(e){
    if(e.key==='ArrowLeft' && dir!=='RIGHT') dir='LEFT';
    if(e.key==='ArrowRight' && dir!=='LEFT') dir='RIGHT';
    if(e.key==='ArrowUp' && dir!=='DOWN') dir='UP';
    if(e.key==='ArrowDown' && dir!=='UP') dir='DOWN';
  }
 
  document.removeEventListener('keydown', kd);
  document.addEventListener('keydown', kd);
  snakeInterval = setInterval(step,120);
}
function stopSnake(){ if(snakeInterval) clearInterval(snakeInterval); snakeInterval=null; document.removeEventListener('keydown', ()=>{}); }

function calcDo() {
  const inputEl = $id('calcInput');
  const resultEl = $id('calcResult');
  if(!inputEl || !resultEl) return;
  const input = inputEl.value.trim();
  if (!input) { resultEl.innerText = 'Podaj dziaÅ‚anie.'; return; }
  try {
    if (!/^[0-9+\-*/(). \t]+$/.test(input)) { resultEl.innerText = 'Nie wiem ile to jest.'; return; }
    const val = Function('return (' + input + ')')();
    const rand = Math.random(); let msg = '';
    if (rand < 0.15) msg = 'ğŸ™jesteÅ› z tym samğŸ™';
    else if (rand < 0.30) msg = 'chyba 21';
    else if (rand < 0.45) msg = 'hmm...';
    else if (rand < 0.60) msg = 'nwm 15 moÅ¼e 37';
    else if (rand < 0.75) msg = 'ğŸ”¥TakğŸ”¥';
    else if (rand < 0.80) msg = 'Hello World!';
    else msg = 'Wynik: ' + val;
    resultEl.innerText = msg;
  } catch (e) {
    resultEl.innerText = 'Nie rozumiem tego dziaÅ‚ania.';
  }
}


function randomIP() {
  return `${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
}


let xpVirusActive = false;

function playJumpscareSound() {
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const bufferSize = ctx.sampleRate * 1.2;
    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
    const data = buffer.getChannelData(0);
    for (let i = 0; i < bufferSize; i++) {
      const t = i / bufferSize;
      const noise = (Math.random() * 2 - 1) * Math.pow(1 - t, 2);
      data[i] = noise * (1 - Math.exp(-50 * t));
    }
    const src = ctx.createBufferSource();
    src.buffer = buffer;
    const gain = ctx.createGain();
    gain.gain.setValueAtTime(0.0001, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(1.5, ctx.currentTime + 0.02);
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.9);
    src.connect(gain).connect(ctx.destination);
    src.start();
  } catch (e) {}
}

function showJumpscareOverlay() {
  const ov = document.createElement('div');
  ov.id = 'jumpscareOverlay';
  ov.style.position = 'fixed';
  ov.style.inset = '0';
  ov.style.background = 'radial-gradient(circle at 30% 30%, rgba(255,0,0,0.98), rgba(0,0,0,0.95))';
  ov.style.zIndex = '9999999';
  ov.style.display = 'flex';
  ov.style.alignItems = 'center';
  ov.style.justifyContent = 'center';
  ov.style.flexDirection = 'column';
  ov.style.color = '#fff';
  ov.style.fontFamily = 'Impact, sans-serif';
  ov.style.textAlign = 'center';
  ov.style.fontSize = '6vw';
  ov.style.letterSpacing = '2px';
  ov.style.transform = 'scale(0.8)';
  ov.style.animation = 'jampulse 0.45s ease-in-out 0s 4 alternate';
  ov.innerHTML = '<div style="font-size:10vh">!!!</div><div style="font-size:6vh">DEATH XP</div>';
  const style = document.createElement('style');
  style.textContent = '@keyframes jampulse { from { transform: scale(0.85) rotate(-2deg); filter: hue-rotate(0deg) saturate(8); } to { transform: scale(1.05) rotate(2deg); filter: hue-rotate(30deg) saturate(12) blur(0.5px); } }';
  document.head.appendChild(style);
  document.body.appendChild(ov);
  playJumpscareSound();
  setTimeout(() => {
    ov.remove();
    style.remove();
  }, 1600);
}

function applyXPVirus() {
  xpVirusActive = true;
  document.body.style.background = '#300';
  document.body.style.backgroundImage = 'linear-gradient(180deg, rgba(80,0,0,0.6), rgba(20,0,0,0.9))';
  document.body.style.filter = 'saturate(6) contrast(1.1)';
  document.querySelectorAll('.window').forEach(w => {
    w.style.background = '#400';
    w.style.borderColor = '#990000';
    w.style.color = '#ffaaaa';
  });
}

function restoreFromXPVirus() {
  xpVirusActive = false;
  document.body.style.background = '';
  document.body.style.backgroundImage = '';
  document.body.style.filter = '';
  document.querySelectorAll('.window').forEach(w => {
    w.style.background = '';
    w.style.borderColor = '';
    w.style.color = '';
  });
}

function runCMD() {
    const input = $id("cmd-input");
    const output = $id("cmd-output");
    if (!input || !output) return;

    const cmd = (input.value || "").trim().toLowerCase();
    output.innerHTML = "";

    // wypisujemy wpisanÄ… komendÄ™ od gÃ³ry
    output.innerHTML += `<div style="color:#0f0">C:\\> ${escapeHtml(cmd)}</div>`;
    input.value = "";
  input.focus();

  if (cmd === "help") {
    output.innerHTML += `
      <div>- help â€” lista komend</div>
      <div>- clear / cls â€” czyÅ›ci ekran</div>
      <div>- ipconfig â€” pokazuje IP</div>
      <div>- dir â€” lista plikÃ³w</div>
      <div>- ping [adres] â€” pinguje adres</div>
      <div>- hostname â€” nazwa komputera</div>
      <div>- ver â€” wersja systemu</div>
      <div>- systeminfo â€” informacje o systemie</div>
      <div>- date â€” data</div>
      <div>- echo [tekst] â€” tekst :O</div>
      <div>- xpvirus </div>
      <div>- bluescreen </div>
      <div>- shake </div>
      <div>- glitch </div>
      <div>- deathxp </div>
      <div>- sl â€” pociÄ…g</div>
    `;
  } else if (cmd === "clear" || cmd === "cls") {
    output.innerHTML = "";
  } else if (cmd === "ipconfig") {
    output.innerHTML += `
      <div>Windows IP Configuration</div><br>
      <div>Ethernet adapter Local Area Connection:</div>
      <div>   IPv4 Address. . . . . . . . . . . : ${randomIP()}</div>
      <div>   Subnet Mask . . . . . . . . . . . : 255.255.255.0</div>
      <div>   Default Gateway . . . . . . . . . : ${randomIP()}</div>
    `;
  } else if (cmd === "dir") {
    output.innerHTML += `
      <div> Volume in drive C has no label.</div>
      <div> Directory of C:\\</div><br>
      <div>04/01/2008  12:00 AM    <DIR>          Windows</div>
      <div>04/01/2008  12:00 AM    <DIR>          Users</div>
      <div>04/01/2008  12:00 AM    <DIR>          Program Files</div>
      <div>04/01/2008  12:00 AM    912,384        autoexec.bat</div>
      <div>04/01/2008  12:00 AM     24,190        config.sys</div>
    `;
  } else if (cmd.startsWith("ping ")) {
    const target = cmd.split(" ")[1] || '127.0.0.1';
    output.innerHTML += `
      <div>Pinging ${escapeHtml(target)} with 32 bytes of data:</div>
      <div>Reply from ${randomIP()}: bytes=32 time=${Math.floor(Math.random()*100)}ms TTL=128</div>
      <div>Reply from ${randomIP()}: bytes=32 time=${Math.floor(Math.random()*100)}ms TTL=128</div>
      <div>Reply from ${randomIP()}: bytes=32 time=${Math.floor(Math.random()*100)}ms TTL=128</div>
    `;
  } else if (cmd === "hostname") {
    output.innerHTML += `<div>Czarny Pracownik-PC</div>`;
  } else if (cmd === "ver") {
    output.innerHTML += `<div>Microsoft Windows XP [Version 5.1.2600]</div>`;
  } else if (cmd === "systeminfo") {
    output.innerHTML += `
      <div>Host Name:                 GiggaNiga-PC</div>
      <div>OS Name:                   Microsoft Windows XP Professional</div>
      <div>OS Version:                5.1.2600 Service Pack 3</div>
      <div>System Manufacturer:       ACME Corp</div>
      <div>System Model:              Virtual Machine</div>
      <div>Processor(s):              1 x Intel(R) Core(TM)</div>
    `;
  } else if (cmd === "date") {
    output.innerHTML += `<div>${new Date().toLocaleDateString()}</div>`;
  } else if (cmd.startsWith("echo ")) {
    output.innerHTML += `<div>${escapeHtml(raw.slice(5))}</div>`;
  } else if (cmd === "xpvirus") {
    output.innerHTML += "<div style='color:red;'>XP VIRUS Starting</div>";

    const body = document.body;
    const oldBg = body.style.background;
    const oldBgImg = body.style.backgroundImage;
    const oldFilter = body.style.filter;

    body.style.background = "#300";
    body.style.backgroundImage = "url('bloodxp.jpg')";
    body.style.backgroundSize = "cover";
    body.style.filter = "hue-rotate(-50deg) saturate(4)";

    document.querySelectorAll('.window').forEach(w => {
        w.dataset.oldBg = w.style.background;
        w.dataset.oldBorder = w.style.borderColor;
        w.style.background = "#400";
        w.style.borderColor = "#900";
    });

    const cmdWin = document.getElementById("cmdWindow");
    if (cmdWin) {
        cmdWin.dataset.oldBg = cmdWin.style.background;
        cmdWin.dataset.oldColor = cmdWin.style.color;
        cmdWin.style.background = "#200";
        cmdWin.style.color = "#f33";
    }
}
 
 else if (cmd === "bluescreen") {
    input.disabled = true;
    const bsod = document.createElement("div");
    bsod.style.position = "fixed";
    bsod.style.top = "0";
    bsod.style.left = "0";
    bsod.style.width = "100%";
    bsod.style.height = "100%";
    bsod.style.background = "#0000AA";
    bsod.style.color = "white";
    bsod.style.fontFamily = "Consolas, monospace";
    bsod.style.fontSize = "18px";
    bsod.style.padding = "40px";
    bsod.style.zIndex = "999999";
    bsod.innerHTML = `
      <b>A problem has been detected and Windows has been shut down...</b><br><br>
      *** STOP: 0x0000007B<br><br>
      Dumping physical memory: <span id="dumpProgress">0%</span>
    `;
    document.body.appendChild(bsod);
    let progress = 0;
    const interval = setInterval(() => {
      progress++;
      const dp = document.getElementById("dumpProgress");
      if (dp) dp.innerText = progress + "%";
      if (progress >= 100) {
        clearInterval(interval);
        setTimeout(() => {
          bsod.remove();
          input.disabled = false;
          output.innerHTML += "<div>System recovered.</div>";
        }, 800);
      }
    }, 30);
  } else if (cmd === "shake") {
    output.innerHTML += `<div>RAT SHAKER!</div>`;
    const w = document.getElementById("cmdWindow");
    if (w) w.classList.add("shakeEffect");
    setTimeout(() => { if (w) w.classList.remove("shakeEffect"); }, 2000);
  } else if (cmd === "glitch") {
    output.innerHTML += "<div>GLITCH MODE ENABLED</div>";
    const w = document.getElementById("cmdWindow");
    if (w) w.classList.add("glitchEffect");
    setTimeout(() => { if (w) w.classList.remove("glitchEffect"); output.innerHTML += "<div>Glitch stabilized.</div>"; }, 3000);
 
 } else if (cmd === "deathxp") {

    output.innerHTML += "<div style='color:red;'>Heh sam to sobie zrobiÅ‚es/aÅ› xD</div>";
    showJumpscareOverlay();
    setTimeout(() => {
      output.innerHTML += "<div style='color:lime'>System stabilized (after jump).</div>";
    }, 1800);

  } else if (cmd === "sl") {
    const outputArea = output;
    outputArea.innerHTML += "<div>Steam Locomotive starting...</div>";
    const trainASCII =
`      ====        ________               
  _D _|  |_______/        \\__I_I_____===__
   |(_)---  |   H\\________/ |   |        =
   /     |  |   H  |  |     |   |         |
  |      |  |   H  |__|     |   |         |
  | ________|___H__/__\\_____|___|________|
  |/ |   |-----------I-----I--------------|
__/  |___| |___I_____I_____I_____I_______|
 |   |   | |    |     |     |     |      |
_|___|___|_|____|_____|_____|_____|______|
(O) (O)    (O)    (O)   (O)   (O)    (O)
`;
    const smokeFrames = [
      "     (   )",
      "    (     )",
      "  (  (   )  )",
      "   (       )",
      "    (     )",
      "     (   )",
      "      ( )",
      " "
    ];
    const train = document.createElement("pre");
    train.style.position = "fixed";
    train.style.top = "150px";
    train.style.left = "100vw";
    train.style.whiteSpace = "pre";
    train.style.color = "#0f0";
    train.style.fontSize = "12px";
    train.style.fontFamily = "monospace";
    train.style.zIndex = "99999";
    train.innerText = trainASCII;
    document.body.appendChild(train);
    const smoke = document.createElement("pre");
    smoke.style.position = "fixed";
    smoke.style.top = "100px";
    smoke.style.left = "100vw";
    smoke.style.color = "#0f0";
    smoke.style.fontSize = "12px";
    smoke.style.fontFamily = "monospace";
    smoke.style.zIndex = "99999";
    document.body.appendChild(smoke);
    let x = window.innerWidth;
    let smokeIndex = 0;
    const interval = setInterval(() => {
      x -= 8;
      train.style.left = x + "px";
      smoke.style.left = (x + 40) + "px";
      smoke.innerText = smokeFrames[smokeIndex];
      smokeIndex = (smokeIndex + 1) % smokeFrames.length;
      if (x < -500) {
        clearInterval(interval);
        document.body.removeChild(train);
        document.body.removeChild(smoke);
        outputArea.innerHTML += "<div>Steam Locomotive exited.</div>";
      }
    }, 50);
  } else {
    output.innerHTML += `<div>'${escapeHtml(raw)}' is not recognized.</div>`;
  }

  output.scrollTop = output.scrollHeight;
  input.focus();
}
function escapeHtml(str){
  if(!str && str!==0) return '';
  return String(str).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; });
}


openWindow('home');
</script>
</body>
</html>
